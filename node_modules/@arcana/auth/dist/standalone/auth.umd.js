!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).arcana=e.arcana||{},e.arcana.auth={}))}(this,(function(e){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function t(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}var n={},r={},i=d;d.default=d,d.stable=p,d.stableStringify=p;var o="[...]",s="[Circular]",a=[],l=[];function c(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function d(e,t,n,r){var i;void 0===r&&(r=c()),h(e,"",0,[],void 0,0,r);try{i=0===l.length?JSON.stringify(e,t,n):JSON.stringify(e,_(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==a.length;){var o=a.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function u(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);void 0!==i.get?i.configurable?(Object.defineProperty(r,n,{value:e}),a.push([r,n,t,i])):l.push([t,n,e]):(r[n]=e,a.push([r,n,t]))}function h(e,t,n,r,i,a,l){var c;if(a+=1,"object"==typeof e&&null!==e){for(c=0;c<r.length;c++)if(r[c]===e)return void u(s,e,t,i);if(void 0!==l.depthLimit&&a>l.depthLimit)return void u(o,e,t,i);if(void 0!==l.edgesLimit&&n+1>l.edgesLimit)return void u(o,e,t,i);if(r.push(e),Array.isArray(e))for(c=0;c<e.length;c++)h(e[c],c,c,r,e,a,l);else{var d=Object.keys(e);for(c=0;c<d.length;c++){var f=d[c];h(e[f],f,c,r,e,a,l)}}r.pop()}}function f(e,t){return e<t?-1:e>t?1:0}function p(e,t,n,r){void 0===r&&(r=c());var i,o=g(e,"",0,[],void 0,0,r)||e;try{i=0===l.length?JSON.stringify(o,t,n):JSON.stringify(o,_(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==a.length;){var s=a.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function g(e,t,n,r,i,l,c){var d;if(l+=1,"object"==typeof e&&null!==e){for(d=0;d<r.length;d++)if(r[d]===e)return void u(s,e,t,i);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==c.depthLimit&&l>c.depthLimit)return void u(o,e,t,i);if(void 0!==c.edgesLimit&&n+1>c.edgesLimit)return void u(o,e,t,i);if(r.push(e),Array.isArray(e))for(d=0;d<e.length;d++)g(e[d],d,d,r,e,l,c);else{var h={},p=Object.keys(e).sort(f);for(d=0;d<p.length;d++){var _=p[d];g(e[_],_,d,r,e,l,c),h[_]=e[_]}if(void 0===i)return h;a.push([i,t,e]),i[t]=h}r.pop()}}function _(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(l.length>0)for(var r=0;r<l.length;r++){var i=l[r];if(i[1]===t&&i[0]===n){n=i[2],l.splice(r,1);break}}return e.call(this,t,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.EthereumProviderError=r.EthereumRpcError=void 0;const m=i;class v extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return m.default(this.serialize(),y,2)}}r.EthereumRpcError=v;function y(e,t){if("[Circular]"!==t)return t}r.EthereumProviderError=class extends v{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}};var w={},b={};Object.defineProperty(b,"__esModule",{value:!0}),b.errorValues=b.errorCodes=void 0,b.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},b.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=b,n=r,i=t.errorCodes.rpc.internal,o={code:i,message:s(i)};function s(n,r="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(n)){const r=n.toString();if(d(t.errorValues,r))return t.errorValues[r].message;if(l(n))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function a(e){if(!Number.isInteger(e))return!1;const n=e.toString();return!!t.errorValues[n]||!!l(e)}function l(e){return e>=-32099&&e<=-32e3}function c(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=s,e.isValidCode=a,e.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!1}={}){var i,l;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof n.EthereumRpcError)return e.serialize();const u={};if(e&&"object"==typeof e&&!Array.isArray(e)&&d(e,"code")&&a(e.code)){const t=e;u.code=t.code,t.message&&"string"==typeof t.message?(u.message=t.message,d(t,"data")&&(u.data=t.data)):(u.message=s(u.code),u.data={originalError:c(e)})}else{u.code=t.code;const n=null===(i=e)||void 0===i?void 0:i.message;u.message=n&&"string"==typeof n?n:t.message,u.data={originalError:c(e)}}const h=null===(l=e)||void 0===l?void 0:l.stack;return r&&e&&h&&"string"==typeof h&&(u.stack=h),u}}(w);var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.ethErrors=void 0;const C=r,E=w,L=b;function k(e,t){const[n,r]=N(t);return new C.EthereumRpcError(e,n||E.getMessageFromCode(e),r)}function S(e,t){const[n,r]=N(t);return new C.EthereumProviderError(e,n||E.getMessageFromCode(e),r)}function N(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}x.ethErrors={rpc:{parse:e=>k(L.errorCodes.rpc.parse,e),invalidRequest:e=>k(L.errorCodes.rpc.invalidRequest,e),invalidParams:e=>k(L.errorCodes.rpc.invalidParams,e),methodNotFound:e=>k(L.errorCodes.rpc.methodNotFound,e),internal:e=>k(L.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return k(t,e)},invalidInput:e=>k(L.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>k(L.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>k(L.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>k(L.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>k(L.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>k(L.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>S(L.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>S(L.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>S(L.errorCodes.provider.unsupportedMethod,e),disconnected:e=>S(L.errorCodes.provider.disconnected,e),chainDisconnected:e=>S(L.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new C.EthereumProviderError(t,n,r)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=r;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const n=w;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const i=x;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return i.ethErrors}});const o=b;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}(n);var I,O={},R={exports:{}},A="object"==typeof Reflect?Reflect:null,P=A&&"function"==typeof A.apply?A.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};I=A&&"function"==typeof A.ownKeys?A.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var j=Number.isNaN||function(e){return e!=e};function F(){F.init.call(this)}R.exports=F,R.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}V(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&V(e,"error",t,n)}(e,i,{once:!0})}))},F.EventEmitter=F,F.prototype._events=void 0,F.prototype._eventsCount=0,F.prototype._maxListeners=void 0;var D=10;function $(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function U(e){return void 0===e._maxListeners?F.defaultMaxListeners:e._maxListeners}function M(e,t,n,r){var i,o,s,a;if($(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=U(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=W.bind(r);return i.listener=n,r.wrapFn=i,i}function z(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):H(i,i.length)}function q(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function H(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function V(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(F,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(e){if("number"!=typeof e||e<0||j(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");D=e}}),F.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},F.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||j(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},F.prototype.getMaxListeners=function(){return U(this)},F.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)P(a,this,t);else{var l=a.length,c=H(a,l);for(n=0;n<l;++n)P(c[n],this,t)}return!0},F.prototype.addListener=function(e,t){return M(this,e,t,!1)},F.prototype.on=F.prototype.addListener,F.prototype.prependListener=function(e,t){return M(this,e,t,!0)},F.prototype.once=function(e,t){return $(t),this.on(e,T(this,e,t)),this},F.prototype.prependOnceListener=function(e,t){return $(t),this.prependListener(e,T(this,e,t)),this},F.prototype.removeListener=function(e,t){var n,r,i,o,s;if($(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},F.prototype.off=F.prototype.removeListener,F.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},F.prototype.listeners=function(e){return z(this,e,!0)},F.prototype.rawListeners=function(e){return z(this,e,!1)},F.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):q.call(e,t)},F.prototype.listenerCount=q,F.prototype.eventNames=function(){return this._eventsCount>0?I(this._events):[]},Object.defineProperty(O,"__esModule",{value:!0});const G=R.exports;function J(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout((()=>{throw e}))}}class B extends G.EventEmitter{emit(e,...t){let n="error"===e;const r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}const i=r[e];if(void 0===i)return!1;if("function"==typeof i)J(i,this,t);else{const e=i.length,n=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(i);for(let r=0;r<e;r+=1)J(n[r],this,t)}return!0}}var K=O.default=B;class Z extends Error{constructor(e,t){super(e),this.message=t,this.message=`Arcana SDK error: [${e}] ${t}`}}const Y=new Z("user_not_logged_in","User is not logged in"),X=new Z("wallet_not_initialized","AuthProvider is not initialized. Please run `await auth.init(...)` before calling functions"),Q=new class{constructor(e,t){this.message=`Arcana SDK warning: [${e}] ${t}`}log(){console.warn(this.message)}}("duplicate_iframe","Duplicate iframe detected, please keep a single instance of AuthProvider"),ee={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4,NOLOGS:5},te={};let ne=ee.NOLOGS,re=null;const ie=e=>{ne=e},oe=e=>(te[e]||(te[e]=new se(ne,e)),te[e]);class se{constructor(e,t){this.logLevel=e,this.prefix="[ARCANA_AUTH]",t&&(this.prefix+=`[${t}]`)}log(e,t,n={}){this.internalLog(ee[e],t,n)}info(e,t={}){this.internalLog(ee.INFO,e,t)}debug(e,t={}){this.internalLog(ee.DEBUG,e,t)}warn(e,t={}){this.internalLog(ee.WARNING,e,t)}error(e,t={}){var n;t instanceof Error&&this.internalLog(ee.ERROR,e,`${t.name}: ${t.message}: ${t.stack}`),this.internalLog(ee.ERROR,e,t),n=JSON.stringify({message:e,params:t}),re&&re(n)}internalLog(e,t,n){const r=`${this.prefix} - ${this.getLogLevelName(e)} ${this.getTime()} ${t} \n[PARAMS]: ${JSON.stringify(n)}\n          `;this.consoleLog(e,r)}getLogLevelName(e){switch(e){case ee.DEBUG:return"DEBUG";case ee.INFO:return"INFO";case ee.WARNING:return"WARN";case ee.ERROR:return"ERROR";default:return"NOTSET"}}getTime(){return(new Date).toLocaleTimeString()}consoleLog(e,t){if(!(e<this.logLevel))switch(e){case ee.DEBUG:console.debug(t);break;case ee.WARNING:console.warn(t);break;case ee.ERROR:console.error(t);break;case ee.INFO:console.info(t);break;default:console.log(t)}}}const ae="data:image/svg+xml,%3Csvg width='151' height='147' viewBox='0 0 151 147' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg opacity='0.419035'%3E%3Cpath d='M94.3585 4.39385C94.3585 6.8206 92.3736 8.78798 89.9253 8.78798C87.477 8.78798 85.4922 6.8206 85.4922 4.39385C85.4922 1.96723 87.477 0 89.9253 0C92.3736 0 94.3585 1.96723 94.3585 4.39385Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M59.4441 15.3287L56.8114 16.8352C56.3347 17.108 55.7253 16.9461 55.4501 16.4737L50.6962 8.31243C50.421 7.84009 50.5844 7.23603 51.0609 6.96337L53.6938 5.45667C54.1703 5.184 54.7797 5.34582 55.055 5.81815L59.8088 13.9795C60.0841 14.452 59.9207 15.0559 59.4441 15.3287Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M15.0339 32.3637L15.6261 32.5628C16.2975 32.7886 17.0381 32.6722 17.6065 32.2519L18.1077 31.8812C19.5388 30.8226 21.5735 31.8501 21.5507 33.6199L21.5427 34.2397C21.5336 34.9425 21.8739 35.6047 22.4528 36.0106L22.9635 36.3685C24.4215 37.3904 24.0642 39.6257 22.359 40.1512L21.7618 40.3352C21.0846 40.5438 20.5546 41.0694 20.3442 41.7405L20.1584 42.3325C19.6284 44.0226 17.3731 44.3766 16.342 42.9315L15.9807 42.4255C15.5713 41.8517 14.9032 41.5142 14.1942 41.5233L13.5688 41.5311C11.7833 41.5537 10.7467 39.5372 11.8147 38.1186L12.1888 37.6218C12.613 37.0586 12.7302 36.3245 12.5024 35.6589L12.3015 35.0719C11.7281 33.3957 13.3427 31.7954 15.0339 32.3637Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M11.2466 63.5287L11.9116 66.4689C12.032 67.0012 11.6943 67.5295 11.1572 67.6487L1.87966 69.7101C1.34269 69.8293 0.809791 69.4946 0.689237 68.9623L0.0243071 66.0219C-0.0959554 65.4897 0.241739 64.9615 0.778708 64.8423L10.0564 62.7809C10.5933 62.6617 11.1262 62.9964 11.2466 63.5287Z' fill='%239DE000'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M20.6082 100.625C20.6082 103.052 18.6234 105.019 16.1752 105.019C13.7268 105.019 11.7422 103.052 11.7422 100.625C11.7422 98.1987 13.7268 96.2314 16.1752 96.2314C18.6234 96.2314 20.6082 98.1987 20.6082 100.625Z' fill='%23F23D3D'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M15.0339 122.725L15.6261 122.924C16.2975 123.15 17.0381 123.034 17.6065 122.613L18.1077 122.242C19.5388 121.184 21.5735 122.211 21.5507 123.981L21.5427 124.601C21.5336 125.304 21.8739 125.966 22.4528 126.372L22.9635 126.73C24.4215 127.752 24.0642 129.987 22.359 130.513L21.7618 130.697C21.0846 130.905 20.5546 131.431 20.3442 132.102L20.1584 132.694C19.6284 134.384 17.3731 134.738 16.342 133.293L15.9807 132.787C15.5713 132.213 14.9032 131.876 14.1942 131.885L13.5688 131.893C11.7833 131.915 10.7467 129.899 11.8147 128.48L12.1888 127.983C12.613 127.42 12.7302 126.686 12.5024 126.02L12.3015 125.433C11.7281 123.757 13.3427 122.157 15.0339 122.725Z' fill='%23FAEE3D'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M129.132 28.1704C127.789 26.435 128.205 23.8499 130.054 22.4436C131.903 21.0374 134.53 21.3082 135.873 23.0437C135.876 23.047 135.878 23.0503 135.881 23.0535' stroke='%23F23D3D' stroke-width='1.98137' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M140.862 52.2221L141.454 52.4212C142.126 52.647 142.866 52.5306 143.435 52.1103L143.936 51.7396C145.367 50.681 147.402 51.7085 147.379 53.4783L147.371 54.0981C147.362 54.8009 147.702 55.4631 148.281 55.869L148.792 56.2269C150.25 57.2488 149.893 59.4841 148.187 60.0096L147.59 60.1936C146.913 60.4022 146.383 60.9278 146.172 61.5989L145.986 62.1909C145.456 63.881 143.201 64.235 142.17 62.7899L141.809 62.2839C141.399 61.7101 140.732 61.3726 140.022 61.3817L139.397 61.3896C137.612 61.4121 136.575 59.3956 137.643 57.9771L138.017 57.4803C138.441 56.917 138.558 56.1829 138.33 55.5173L138.13 54.9303C137.556 53.2541 139.171 51.6538 140.862 52.2221Z' fill='%23FAEE3D'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M145.217 104.171C148.232 104.564 150.367 107.485 149.948 110.64C149.529 113.795 146.703 116.068 143.689 115.674C143.683 115.674 143.678 115.673 143.672 115.672' stroke='%23F23D3D' stroke-width='1.48603' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M135.718 141.235L133.085 142.742C132.608 143.014 131.999 142.852 131.724 142.38L126.97 134.219C126.694 133.746 126.858 133.142 127.334 132.87L129.967 131.363C130.444 131.09 131.053 131.252 131.328 131.724L136.082 139.886C136.357 140.358 136.194 140.962 135.718 141.235Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M49.4302 146.001C47.5793 143.61 48.1523 140.048 50.6998 138.111C53.2472 136.174 56.8664 136.547 58.7173 138.938L58.7279 138.951' stroke='%233CA6FA' stroke-width='1.98137' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cpath d='M133.141 69.8273C133.141 98.8525 109.4 122.382 80.1137 122.382C50.8274 122.382 27.0859 98.8525 27.0859 69.8273C27.0859 40.802 50.8274 17.2725 80.1137 17.2725C109.4 17.2725 133.141 40.802 133.141 69.8273Z' fill='%239DE000'/%3E%3Cpath d='M56.6641 69.9175L72.2097 85.3247L103.481 54.332' stroke='white' stroke-width='5.7388' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A",le=e=>40===de(e).length,ce="0x",de=e=>e.startsWith(ce)?e.substring(2):e,ue=(e,t=!0)=>{const n=e.toString(16);return t?(e=>e.startsWith(ce)?e:`0x${e}`)(n):de(n)},he=()=>window.location.origin+window.location.pathname,fe=4294967295;let pe=Math.floor(Math.random()*fe);function ge(e){return String.fromCharCode(parseInt(e.slice(1),16))}function _e(e){return t=JSON.stringify(e),window.btoa(encodeURIComponent(t).replace(/%[0-9A-F]{2}/g,ge));var t}class me extends Error{constructor(e,t,n=""){super(t),this.code=e,this.message=t,this.data=n}}class ve extends K{constructor(e){super(),this.rpcConfig=e,this.connected=!1,this.logger=oe("ArcanaProvider"),this.onResponse=(e,t)=>{this.subscriber.emit(`result:${e}:${t.id}`,t)},this.handleEvents=(e,t)=>{switch(e){case"accountsChanged":this.emit(e,[t]);break;case"chainChanged":this.setChainId(t),this.emit("chainChanged",ue(t.chainId));break;case"connect":this.chainId="object"==typeof t?t.chainId:"",this.connected=!0,this.emit("connect",t);break;case"disconnect":this.iframe.handleDisconnect(),this.connected=!1,this.emit("disconnect",t);break;case"message":this.emit("message",t)}},this.subscriber=new K}isArcana(){return!0}init(e,n){return t(this,void 0,void 0,(function*(){this.iframe=e;const{communication:t}=yield this.iframe.setConnectionMethods({onEvent:this.handleEvents,onMethodResponse:(e,t)=>{this.onResponse(e,t)},getParentUrl:he,getAppMode:()=>{var e;return null===(e=this.iframe)||void 0===e?void 0:e.appMode},getAppConfig:this.iframe.getAppConfig,getWalletPosition:this.iframe.getWalletPlace,getRpcConfig:()=>this.rpcConfig,sendPendingRequestCount:this.iframe.onReceivingPendingRequestCount,triggerSocialLogin:n.loginWithSocial,triggerPasswordlessLogin:n.loginWithLink,getPopupState:()=>this.iframe.getState(),setIframeStyle:this.iframe.setIframeStyle,setSessionID:this.iframe.setSessionID,getSDKVersion:()=>"v3"});this.communication=t}))}isLoggedIn(){return t(this,void 0,void 0,(function*(){try{return(yield this.getCommunication("isLoggedIn")).isLoggedIn()}catch(e){return this.logger.error("isLoggedIn",e),!1}}))}isConnected(){return t(this,void 0,void 0,(function*(){return this.connected}))}isLoginAvailable(e){return t(this,void 0,void 0,(function*(){const t=yield this.getCommunication("isLoginAvailable"),n=yield t.isLoginAvailable(e);return this.logger.info("loginAvailable",{[e]:n}),n}))}requestUserInfo(){return t(this,void 0,void 0,(function*(){const e=yield this.getCommunication("getUserInfo");if(!(yield e.isLoggedIn()))throw Y;return yield e.getUserInfo()}))}getReconnectionUrl(){return t(this,void 0,void 0,(function*(){const e=yield this.getCommunication("getReconnectionUrl");return yield e.getReconnectionUrl()}))}getPublicKey(e,n){return t(this,void 0,void 0,(function*(){return(yield this.getCommunication("getPublicKey")).getPublicKey(e,n)}))}getAvailableLogins(){return t(this,void 0,void 0,(function*(){const e=yield this.getCommunication("getAvailableLogins");return yield e.getAvailableLogins()}))}triggerLogout(){return t(this,void 0,void 0,(function*(){const e=yield this.getCommunication("triggerLogout");yield e.triggerLogout(!0)}))}initPasswordlessLogin(e){return t(this,void 0,void 0,(function*(){const t=yield this.getCommunication("initPasswordlessLogin");return yield t.initPasswordlessLogin(e)}))}initSocialLogin(e){return t(this,void 0,void 0,(function*(){const t=yield this.getCommunication("initSocialLogin");return yield t.initSocialLogin(e)}))}expandWallet(){return t(this,void 0,void 0,(function*(){const e=yield this.getCommunication("expandWallet");return yield e.expandWallet()}))}getCommunication(e="sendRequest"){return t(this,void 0,void 0,(function*(){if(this.communication){const t=yield this.communication.promise;if(!t[e])throw new Z("fn_not_available",`The requested fn ${e} is not available in this context`);return t}throw new Z("connection_not_available","The connection is not available yet")}))}request(e){return t(this,void 0,void 0,(function*(){if(!e||"object"!=typeof e||Array.isArray(e))throw n.ethErrors.rpc.invalidRequest({message:"Invalid request arguments",data:e});const{method:r,params:i}=e;if(!r)throw n.ethErrors.rpc.invalidRequest({message:"Invalid method argument",data:e});const o={method:r,params:i,jsonrpc:"2.0",id:(pe=(pe+1)%fe,pe)};return new Promise(((e,n)=>{this.getCommunication().then((i=>t(this,void 0,void 0,(function*(){this.getResponse(r,o.id).then(e,n),yield i.sendRequest(o)}))),n)}))}))}getResponse(e,t){return new Promise(((n,r)=>{this.subscriber.once(`result:${e}:${t}`,(e=>e.error?r(ye(e.error)):n(e.result)))}))}setChainId(e){e&&"object"==typeof e&&"chainId"in e&&"number"==typeof e.chainId&&(this.chainId=ue(e.chainId))}}const ye=e=>{switch(oe("ArcanaProvider").error("getError",e),e){case"user_deny":return new me(4001,"User rejected the request.");case"operation_not_supported":return new me(4200,"The requested method is not supported by this provider.");case"all_disconnected":return new me(4900,"The provider is disconnected from all chains. Login is pending.");default:return"string"!=typeof e?new me(e.code,e.message,e.data):n.ethErrors.rpc.internal(e)}};var we,be,xe,Ce,Ee,Le,ke;!function(e){e[e.CREATED=0]="CREATED",e[e.RUNNING=1]="RUNNING",e[e.DONE=2]="DONE"}(we||(we={})),e.BearerAuthentication=void 0,(e.BearerAuthentication||(e.BearerAuthentication={})).firebase="firebase",function(e){e[e.NoUI=0]="NoUI",e[e.Widget=1]="Widget",e[e.Full=2]="Full"}(be||(be={})),function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(xe||(xe={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(Ce||(Ce={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NoIframeSrc="NoIframeSrc"}(Ee||(Ee={})),function(e){e.DataCloneError="DataCloneError"}(Le||(Le={})),function(e){e.Message="message"}(ke||(ke={}));const Se={"http:":"80","https:":"443"},Ne=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,Ie=["file:","data:"];const Oe=({name:e,message:t,stack:n})=>({name:e,message:t,stack:n});let Re=0;var Ae=()=>++Re;const Pe=e=>e?e.split("."):[],je=(e,t,n)=>{const r=Pe(t);return r.reduce(((e,t,i)=>(void 0===e[t]&&(e[t]={}),i===r.length-1&&(e[t]=n),e[t])),e),e},Fe=(e,t)=>{const n={};return Object.keys(e).forEach((r=>{const i=e[r],o=((e,t)=>{const n=Pe(t||"");return n.push(e),(e=>e.join("."))(n)})(r,t);"object"==typeof i&&Object.assign(n,Fe(i,o)),"function"==typeof i&&(n[o]=i)})),n};var De=(e,t,n,r,i)=>{const{localName:o,local:s,remote:a,originForSending:l,originForReceiving:c}=t;let d=!1;i(`${o}: Connecting call sender`);const u=e=>(...t)=>{let n;i(`${o}: Sending ${e}() call`);try{a.closed&&(n=!0)}catch(e){n=!0}if(n&&r(),d){const t=new Error(`Unable to send ${e}() call due to destroyed connection`);throw t.code=Ee.ConnectionDestroyed,t}return new Promise(((n,r)=>{const d=Ae(),u=t=>{if(t.source!==a||t.data.penpal!==xe.Reply||t.data.id!==d)return;if("*"!==c&&t.origin!==c)return void i(`${o} received message from origin ${t.origin} which did not match expected origin ${c}`);const l=t.data;i(`${o}: Received ${e}() reply`),s.removeEventListener(ke.Message,u);let h=l.returnValue;l.returnValueIsError&&(h=(e=>{const t=new Error;return Object.keys(e).forEach((n=>t[n]=e[n])),t})(h)),(l.resolution===Ce.Fulfilled?n:r)(h)};s.addEventListener(ke.Message,u);const h={penpal:xe.Call,id:d,methodName:e,args:t};a.postMessage(h,l)}))},h=n.reduce(((e,t)=>(e[t]=u(t),e)),{});return Object.assign(e,(e=>{const t={};for(const n in e)je(t,n,e[n]);return t})(h)),()=>{d=!0}},$e=(e,t,n,r,i)=>{const{destroy:o,onDestroy:s}=r;let a,l;const c={};return r=>{if("*"!==t&&r.origin!==t)return void i(`Parent: Handshake - Received ACK message from origin ${r.origin} which did not match expected origin ${t}`);i("Parent: Handshake - Received ACK");const d={localName:"Parent",local:window,remote:r.source,originForSending:n,originForReceiving:t};a&&a(),a=((e,t,n)=>{const{localName:r,local:i,remote:o,originForSending:s,originForReceiving:a}=e;let l=!1;const c=e=>{if(e.source!==o||e.data.penpal!==xe.Call)return;if("*"!==a&&e.origin!==a)return void n(`${r} received message from origin ${e.origin} which did not match expected origin ${a}`);const i=e.data,{methodName:c,args:d,id:u}=i;n(`${r}: Received ${c}() call`);const h=e=>t=>{if(n(`${r}: Sending ${c}() reply`),l)return void n(`${r}: Unable to send ${c}() reply due to destroyed connection`);const i={penpal:xe.Reply,id:u,resolution:e,returnValue:t};e===Ce.Rejected&&t instanceof Error&&(i.returnValue=Oe(t),i.returnValueIsError=!0);try{o.postMessage(i,s)}catch(e){if(e.name===Le.DataCloneError){const t={penpal:xe.Reply,id:u,resolution:Ce.Rejected,returnValue:Oe(e),returnValueIsError:!0};o.postMessage(t,s)}throw e}};new Promise((e=>e(t[c].apply(t,d)))).then(h(Ce.Fulfilled),h(Ce.Rejected))};return i.addEventListener(ke.Message,c),()=>{l=!0,i.removeEventListener(ke.Message,c)}})(d,e,i),s(a),l&&l.forEach((e=>{delete c[e]})),l=r.data.methodNames;const u=De(c,d,l,o,i);return s(u),c}};var Ue=e=>{let{iframe:t,methods:n={},childOrigin:r,timeout:i,debug:o=!1}=e;const s=(e=>(...t)=>{e&&console.log("[Penpal]",...t)})(o),a=((e,t)=>{const n=[];let r=!1;return{destroy(i){r||(r=!0,t(`${e}: Destroying connection`),n.forEach((e=>{e(i)})))},onDestroy(e){r?e():n.push(e)}}})("Parent",s),{onDestroy:l,destroy:c}=a;r||((e=>{if(!e.src&&!e.srcdoc){const e=new Error("Iframe must have src or srcdoc property defined.");throw e.code=Ee.NoIframeSrc,e}})(t),r=(e=>{if(e&&Ie.find((t=>e.startsWith(t))))return"null";const t=document.location,n=Ne.exec(e);let r,i,o;return n?(r=n[1]?n[1]:t.protocol,i=n[2],o=n[4]):(r=t.protocol,i=t.hostname,o=t.port),`${r}//${i}${o&&o!==Se[r]?`:${o}`:""}`})(t.src));const d="null"===r?"*":r,u=Fe(n),h=((e,t,n,r)=>i=>{if(!i.source)return;if("*"!==n&&i.origin!==n)return void e(`Parent: Handshake - Received SYN message from origin ${i.origin} which did not match expected origin ${n}`);e("Parent: Handshake - Received SYN, responding with SYN-ACK");const o={penpal:xe.SynAck,methodNames:Object.keys(t)};i.source.postMessage(o,r)})(s,u,r,d),f=$e(u,r,d,a,s),p=new Promise(((e,n)=>{const r=((e,t)=>{let n;return void 0!==e&&(n=window.setTimeout((()=>{const n=new Error(`Connection timed out after ${e}ms`);n.code=Ee.ConnectionTimeout,t(n)}),e)),()=>{clearTimeout(n)}})(i,c),o=n=>{if(n.source===t.contentWindow&&n.data)if(n.data.penpal!==xe.Syn)if(n.data.penpal!==xe.Ack);else{const t=f(n);t&&(r(),e(t))}else h(n)};window.addEventListener(ke.Message,o),s("Parent: Awaiting handshake"),((e,t)=>{const{destroy:n,onDestroy:r}=t,i=setInterval((()=>{e.isConnected||(clearInterval(i),n())}),6e4);r((()=>{clearInterval(i)}))})(t,a),l((e=>{window.removeEventListener(ke.Message,o),e&&n(e)}))}));return{promise:p,destroy(){c()}}};const Me={border:"none",position:"fixed",height:0,width:0,right:0,bottom:0,zIndex:2147483648},We="xar-wallet";class Te{constructor(e){this.params=e,this.getSessionID=()=>{const e=window.localStorage.getItem(`arcana-auth-${this.getIframeUrl()}-sessionID`);return e?JSON.parse(e):null},this.setSessionID=(e,t)=>{window.localStorage.setItem(`arcana-auth-${this.getIframeUrl()}-sessionID`,JSON.stringify({id:e,expiry:t}))},this.clearSessionID=()=>{window.localStorage.removeItem(`arcana-auth-${this.getIframeUrl()}-sessionID`)},this.setIframeStyle=e=>{var t;if(1==(null===(t=this.params.standaloneMode)||void 0===t?void 0:t.mode))this.widgetIframe.style.height=e.height?e.height:"80vh",this.widgetIframe.style.maxWidth="100%",this.widgetIframe.style.width="430px",this.widgetIframe.style.bottom="0",this.widgetIframe.style.right="0";else for(const t in e)this.widgetIframe.style[t]=e[t]},this.getWalletPlace=()=>this.params.position,this.getAppConfig=()=>this.params.appConfig,this.checkDuplicateIframe(),this.checkSecureOrigin()}setConnectionMethods(e){return t(this,void 0,void 0,(function*(){try{return this.iframeCommunication||(this.iframeCommunication=Ue({iframe:this.widgetIframe,methods:Object.assign(Object.assign({},e),{uiEvent:(e,t)=>{var n;(null===(n=this.params.standaloneMode)||void 0===n?void 0:n.handler)&&this.params.standaloneMode.handler(e,t)}}),childOrigin:this.params.iframeUrl}),yield this.iframeCommunication.promise),{iframe:this.widgetIframe,communication:this.iframeCommunication}}catch(e){throw new Error("Could not set connection methods")}}))}triggerBearerAuthentication(e,n){return t(this,void 0,void 0,(function*(){return(yield this.iframeCommunication.promise).triggerBearerLogin(e,n)}))}setWalletType(e){this.appMode=null!=e?e:be.Full,this.initWalletUI()}getState(){return this.state}handleDisconnect(){this.widgetIframe.src=this.getIframeUrl(),this.clearSessionID()}onReceivingPendingRequestCount(e){const t=document.getElementById("req-count-badge");t&&(e>0?(t.style.display="flex",t.textContent=`${e}`):t.style.display="none")}getIframeUrl(){var e,t;const n=_e({standaloneMode:(null===(e=this.params.standaloneMode)||void 0===e?void 0:e.mode)?null===(t=this.params.standaloneMode)||void 0===t?void 0:t.mode:0}),r=new URL(`/${this.params.appId}/v2/login`,this.params.iframeUrl);return r.hash=n,r.toString()}createWidgetIframe(){return((e,t,...n)=>{const r=document.createElement(e);t&&(Object.assign(r,t),t.style&&Object.assign(r.style,t.style));for(const e of n)"string"!=typeof e?r.appendChild(e):r.appendChild(document.createTextNode(e));return r})("iframe",{style:Me,src:this.getIframeUrl(),allow:"clipboard-write",className:We})}checkDuplicateIframe(){[].slice.call(document.querySelectorAll(".xar-wallet")).length>0&&Q.log()}initWalletUI(){this.widgetIframe=this.createWidgetIframe(),document.body.appendChild(this.widgetIframe)}checkSecureOrigin(){const e="localhost"===location.hostname||"127.0.0.1"===location.hostname,t="https:"===location.protocol;if(!(e||t))throw new Error("Insecure origin")}}const ze={authUrl:"https://verify.dev.arcana.network",gatewayUrl:"https://gateway-dev.arcana.network",walletUrl:"https://wallet.dev.arcana.network"},qe={authUrl:"https://verify.beta.arcana.network",gatewayUrl:"https://gateway001-testnet.arcana.network",walletUrl:"https://wallet.beta.arcana.network"},He={authUrl:"https://auth.arcana.network",gatewayUrl:"https://gateway.arcana.network",walletUrl:"https://wallet.arcana.network"};function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ge(e){if(!("string"==typeof e||e instanceof String)){var t=Ve(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}}function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Be(e,t){var n,r;Ge(e),"object"===Je(t)?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return i>=n&&(void 0===r||i<=r)}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}var Ze={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};var Ye="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",Xe="(".concat(Ye,"[.]){3}").concat(Ye),Qe=new RegExp("^".concat(Xe,"$")),et="(?:[0-9a-fA-F]{1,4})",tt=new RegExp("^("+"(?:".concat(et,":){7}(?:").concat(et,"|:)|")+"(?:".concat(et,":){6}(?:").concat(Xe,"|:").concat(et,"|:)|")+"(?:".concat(et,":){5}(?::").concat(Xe,"|(:").concat(et,"){1,2}|:)|")+"(?:".concat(et,":){4}(?:(:").concat(et,"){0,1}:").concat(Xe,"|(:").concat(et,"){1,3}|:)|")+"(?:".concat(et,":){3}(?:(:").concat(et,"){0,2}:").concat(Xe,"|(:").concat(et,"){1,4}|:)|")+"(?:".concat(et,":){2}(?:(:").concat(et,"){0,3}:").concat(Xe,"|(:").concat(et,"){1,5}|:)|")+"(?:".concat(et,":){1}(?:(:").concat(et,"){0,4}:").concat(Xe,"|(:").concat(et,"){1,6}|:)|")+"(?::((?::".concat(et,"){0,5}:").concat(Xe,"|(?::").concat(et,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ge(e),(t=String(t))?"4"===t?Qe.test(e):"6"===t&&tt.test(e):nt(e,4)||nt(e,6)}var rt={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},it=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,ot=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,st=/^[a-z\d]+$/,at=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,lt=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,ct=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;function dt(e,t){if(Ge(e),(t=Ke(t,rt)).require_display_name||t.allow_display_name){var n=e.match(it);if(n){var r=n[1];if(e=e.replace(r,"").replace(/(^<|>$)/g,""),r.endsWith(" ")&&(r=r.slice(0,-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(t.split('"').length!==t.split('\\"').length)return!1}return!0}(r))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var i=e.split("@"),o=i.pop(),s=o.toLowerCase();if(t.host_blacklist.includes(s))return!1;if(t.host_whitelist.length>0&&!t.host_whitelist.includes(s))return!1;var a=i.join("@");if(t.domain_specific_validation&&("gmail.com"===s||"googlemail.com"===s)){var l=(a=a.toLowerCase()).split("+")[0];if(!Be(l.replace(/\./g,""),{min:6,max:30}))return!1;for(var c=l.split("."),d=0;d<c.length;d++)if(!st.test(c[d]))return!1}if(!(!1!==t.ignore_max_length||Be(a,{max:64})&&Be(o,{max:254})))return!1;if(!function(e,t){Ge(e),(t=Ke(t,Ze)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var n=e.split("."),r=n[n.length-1];if(t.require_tld){if(n.length<2)return!1;if(!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1;if(/\s/.test(r))return!1}return!(!t.allow_numeric_tld&&/^\d+$/.test(r))&&n.every((function(e){return!(e.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))}))}(o,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!nt(o)){if(!o.startsWith("[")||!o.endsWith("]"))return!1;var u=o.slice(1,-1);if(0===u.length||!nt(u))return!1}}if('"'===a[0])return a=a.slice(1,a.length-1),t.allow_utf8_local_part?ct.test(a):at.test(a);for(var h=t.allow_utf8_local_part?lt:ot,f=a.split("."),p=0;p<f.length;p++)if(!h.test(f[p]))return!1;return!t.blacklisted_chars||-1===a.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g"))}class ut{constructor(e){this.url=e}open(){const e=ft();return this.window=window.open(this.url,"_blank",e),this.getWindowResponse()}getWindowResponse(){return new Promise(((e,n)=>{let r=!1;const i=window.setInterval((()=>{var e;!r&&(null===(e=this.window)||void 0===e?void 0:e.closed)&&n("User closed the popup")}),500),o=s=>t(this,void 0,void 0,(function*(){var t,a,l;if(!(null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.status))return;const c=s.data;return r=!0,this.clear(o,i),"success"===c.status?(null===(a=this.window)||void 0===a||a.close(),e("success")):"error"==c.status?(null===(l=this.window)||void 0===l||l.close(),n(c.error)):"done"===c.status?e("done"):void console.log("Unexpected event")}));window.addEventListener("message",o,!1)}))}clear(e,t){window.removeEventListener("message",e),window.clearInterval(t)}}const ht={titlebar:0,toolbar:0,status:0,menubar:0,resizable:0,height:1200,width:700,popup:1},ft=()=>{const e=[];for(const t in ht)e.push(`${t}=${ht[t]}`);return e.join(",")};var pt,gt,_t,mt,vt,yt={},wt=[],bt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function xt(e,t){for(var n in t)e[n]=t[n];return e}function Ct(e){var t=e.parentNode;t&&t.removeChild(e)}function Et(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++_t:i};return null==i&&null!=gt.vnode&&gt.vnode(o),o}function Lt(e){return e.children}function kt(e,t){this.props=e,this.context=t}function St(e,t){if(null==t)return e.__?St(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?St(e):null}function Nt(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Nt(e)}}function It(e){(!e.__d&&(e.__d=!0)&&mt.push(e)&&!Ot.__r++||vt!==gt.debounceRendering)&&((vt=gt.debounceRendering)||setTimeout)(Ot)}function Ot(){for(var e;Ot.__r=mt.length;)e=mt.sort((function(e,t){return e.__v.__b-t.__v.__b})),mt=[],e.some((function(e){var t,n,r,i,o,s;e.__d&&(o=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],(r=xt({},i)).__v=i.__v+1,Ut(s,i,r,t.__n,void 0!==s.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?St(i):o,i.__h),Mt(n,i),i.__e!=o&&Nt(i)))}))}function Rt(e,t,n,r,i,o,s,a,l,c){var d,u,h,f,p,g,_,m=r&&r.__k||wt,v=m.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(f=n.__k[d]=null==(f=t[d])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?Et(null,f,null,null,f):Array.isArray(f)?Et(Lt,{children:f},null,null,null):f.__b>0?Et(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(h=m[d])||h&&f.key==h.key&&f.type===h.type)m[d]=void 0;else for(u=0;u<v;u++){if((h=m[u])&&f.key==h.key&&f.type===h.type){m[u]=void 0;break}h=null}Ut(e,f,h=h||yt,i,o,s,a,l,c),p=f.__e,(u=f.ref)&&h.ref!=u&&(_||(_=[]),h.ref&&_.push(h.ref,null,f),_.push(u,f.__c||p,f)),null!=p?(null==g&&(g=p),"function"==typeof f.type&&f.__k===h.__k?f.__d=l=At(f,l,e):l=Pt(e,f,h,m,p,l),"function"==typeof n.type&&(n.__d=l)):l&&h.__e==l&&l.parentNode!=e&&(l=St(h))}for(n.__e=g,d=v;d--;)null!=m[d]&&zt(m[d],m[d]);if(_)for(d=0;d<_.length;d++)Tt(_[d],_[++d],_[++d])}function At(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t="function"==typeof r.type?At(r,t,n):Pt(n,r,r,i,r.__e,t));return t}function Pt(e,t,n,r,i,o){var s,a,l;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),s=null;else{for(a=o,l=0;(a=a.nextSibling)&&l<r.length;l+=2)if(a==i)break e;e.insertBefore(i,o),s=o}return void 0!==s?s:i.nextSibling}function jt(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||bt.test(t)?n:n+"px"}function Ft(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||jt(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||jt(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?$t:Dt,o):e.removeEventListener(t,o?$t:Dt,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function Dt(e){this.l[e.type+!1](gt.event?gt.event(e):e)}function $t(e){this.l[e.type+!0](gt.event?gt.event(e):e)}function Ut(e,t,n,r,i,o,s,a,l){var c,d,u,h,f,p,g,_,m,v,y,w,b,x=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,a=t.__e=n.__e,t.__h=null,o=[a]),(c=gt.__b)&&c(t);try{e:if("function"==typeof x){_=t.props,m=(c=x.contextType)&&r[c.__c],v=c?m?m.props.value:c.__:r,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(_,v):(t.__c=d=new kt(_,v),d.constructor=x,d.render=qt),m&&m.sub(d),d.props=_,d.state||(d.state={}),d.context=v,d.__n=r,u=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=xt({},d.__s)),xt(d.__s,x.getDerivedStateFromProps(_,d.__s))),h=d.props,f=d.state;for(c=0;c<d._sb.length;c++)d.__h.push(d._sb[c]),d._sb=[];if(u)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&_!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,v),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,v)||t.__v===n.__v){d.props=_,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,v),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,f,p)}))}if(d.context=v,d.props=_,d.__v=t,d.__P=e,y=gt.__r,w=0,"prototype"in x&&x.prototype.render)d.state=d.__s,d.__d=!1,y&&y(t),c=d.render(d.props,d.state,d.context);else do{d.__d=!1,y&&y(t),c=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=xt(xt({},r),d.getChildContext())),u||null==d.getSnapshotBeforeUpdate||(p=d.getSnapshotBeforeUpdate(h,f)),b=null!=c&&c.type===Lt&&null==c.key?c.props.children:c,Rt(e,Array.isArray(b)?b:[b],t,n,r,i,o,s,a,l),d.base=t.__e,t.__h=null,d.__h.length&&s.push(d),g&&(d.__E=d.__=null),d.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Wt(n.__e,t,n,r,i,o,s,l);(c=gt.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=o)&&(t.__e=a,t.__h=!!l,o[o.indexOf(a)]=null),gt.__e(e,t,n)}}function Mt(e,t){gt.__c&&gt.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){gt.__e(e,t.__v)}}))}function Wt(e,t,n,r,i,o,s,a){var l,c,d,u=n.props,h=t.props,f=t.type,p=0;if("svg"===f&&(i=!0),null!=o)for(;p<o.length;p++)if((l=o[p])&&"setAttribute"in l==!!f&&(f?l.localName===f:3===l.nodeType)){e=l,o[p]=null;break}if(null==e){if(null===f)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,h.is&&h),o=null,a=!1}if(null===f)u===h||a&&e.data===h||(e.data=h);else{if(o=o&&pt.call(e.childNodes),c=(u=n.props||yt).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!a){if(null!=o)for(u={},p=0;p<e.attributes.length;p++)u[e.attributes[p].name]=e.attributes[p].value;(d||c)&&(d&&(c&&d.__html==c.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||Ft(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||Ft(e,o,t[o],n[o],r)}(e,h,u,i,a),d)t.__k=[];else if(p=t.props.children,Rt(e,Array.isArray(p)?p:[p],t,n,r,i&&"foreignObject"!==f,o,s,o?o[0]:n.__k&&St(n,0),a),null!=o)for(p=o.length;p--;)null!=o[p]&&Ct(o[p]);a||("value"in h&&void 0!==(p=h.value)&&(p!==e.value||"progress"===f&&!p||"option"===f&&p!==u.value)&&Ft(e,"value",p,u.value,!1),"checked"in h&&void 0!==(p=h.checked)&&p!==e.checked&&Ft(e,"checked",p,u.checked,!1))}return e}function Tt(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){gt.__e(e,n)}}function zt(e,t,n){var r,i;if(gt.unmount&&gt.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Tt(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){gt.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&zt(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||Ct(e.__e),e.__=e.__e=e.__d=void 0}function qt(e,t,n){return this.constructor(e,n)}function Ht(e,t,n){var r,i,o;gt.__&&gt.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],Ut(t,e=(!r&&n||t).__k=function(e,t,n){var r,i,o,s={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?pt.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return Et(e,s,r,i,null)}(Lt,null,[e]),i||yt,yt,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?pt.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r),Mt(o,e)}pt=wt.slice,gt={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},_t=0,kt.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=xt({},this.state),"function"==typeof e&&(e=e(xt({},n),this.props)),e&&xt(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),It(this))},kt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),It(this))},kt.prototype.render=Lt,mt=[],Ot.__r=0;var Vt=0;function Gt(e,t,n,r,i){var o,s,a={};for(s in t)"ref"==s?o=t[s]:a[s]=t[s];var l={type:e,props:a,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Vt,__source:i,__self:r};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===a[s]&&(a[s]=o[s]);return gt.vnode&&gt.vnode(l),l}const Jt="https://auth-icons.s3.ap-south-1.amazonaws.com",Bt={google:`${Jt}/google.png`,twitter:`${Jt}/twitter.png`,github:`${Jt}/github-light.png`,github_light:`${Jt}/github.png`,twitch:`${Jt}/twitch.png`,discord:`${Jt}/discord.png`,aws:`${Jt}/aws.png`,aws_light:`${Jt}/aws_light.png`,steam:`${Jt}/steam.png`};const Kt={light:`${Jt}/secured-by-arcana-light.svg`,dark:`${Jt}/secured-by-arcana-dark.svg`};var Zt,Yt,Xt,Qt,en=0,tn=[],nn=[],rn=gt.__b,on=gt.__r,sn=gt.diffed,an=gt.__c,ln=gt.unmount;function cn(e,t){gt.__h&&gt.__h(Yt,e,en||t),en=0;var n=Yt.__H||(Yt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:nn}),n.__[e]}function dn(e){return en=1,un(mn,e)}function un(e,t,n){var r=cn(Zt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):mn(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Yt,!Yt.u)){Yt.u=!0;var i=Yt.shouldComponentUpdate;Yt.shouldComponentUpdate=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var s=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!i||i.call(this,e,t,n))}}return r.__N||r.__}function hn(){for(var e;e=tn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(gn),e.__H.__h.forEach(_n),e.__H.__h=[]}catch(t){e.__H.__h=[],gt.__e(t,e.__v)}}gt.__b=function(e){"function"!=typeof e.type||e.__m||e.type===Lt?e.__m||(e.__m=e.__&&e.__.__m?e.__.__m:""):e.__m=(e.__&&e.__.__m?e.__.__m:"")+(e.__&&e.__.__k?e.__.__k.indexOf(e):0),Yt=null,rn&&rn(e)},gt.__r=function(e){on&&on(e),Zt=0;var t=(Yt=e.__c).__H;t&&(Xt===Yt?(t.__h=[],Yt.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=nn,e.__N=e.i=void 0}))):(t.__h.forEach(gn),t.__h.forEach(_n),t.__h=[])),Xt=Yt},gt.diffed=function(e){sn&&sn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==tn.push(t)&&Qt===gt.requestAnimationFrame||((Qt=gt.requestAnimationFrame)||pn)(hn)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==nn&&(e.__=e.__V),e.i=void 0,e.__V=nn}))),Xt=Yt=null},gt.__c=function(e,t){t.some((function(e){try{e.__h.forEach(gn),e.__h=e.__h.filter((function(e){return!e.__||_n(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],gt.__e(n,e.__v)}})),an&&an(e,t)},gt.unmount=function(e){ln&&ln(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{gn(e)}catch(e){t=e}})),n.__H=void 0,t&&gt.__e(t,n.__v))};var fn="function"==typeof requestAnimationFrame;function pn(e){var t,n=function(){clearTimeout(r),fn&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);fn&&(t=requestAnimationFrame(n))}function gn(e){var t=Yt,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Yt=t}function _n(e){var t=Yt;e.__c=e.__(),Yt=t}function mn(e,t){return"function"==typeof t?t(e):t}function vn(e){const t=e.compact?60:80,{stroke:n=8,secondaryColor:r}=e;return Gt("div",Object.assign({"aria-label":"oval-loading"},{children:Gt("svg",Object.assign({width:t,height:t,viewBox:yn(Number(n),20),xmlns:"http://www.w3.org/2000/svg",className:"xar-loader-circle","data-testid":"oval-svg"},{children:Gt("g",Object.assign({fill:"none",fillRule:"evenodd"},{children:Gt("g",Object.assign({transform:"translate(1 1)","stroke-width":n,"data-testid":"oval-secondary-group"},{children:[Gt("circle",{strokeOpacity:".5",cx:"0",cy:"0",r:20,stroke:r,"stroke-width":n,opacity:.3}),Gt("path",Object.assign({d:wn(20),stroke:e.strokeColor},{children:Gt("animateTransform",{attributeName:"transform",type:"rotate",from:"0 0 0",to:"360 0 0",dur:"1s",repeatCount:"indefinite"})}))]}))}))}))}))}const yn=(e,t)=>{const n=-t-e/2+1,r=2*t+e;return[n,n,r,r].join(" ")},wn=e=>["M"+e+" 0c0-9.94-8.06",e,e,e].join("-");!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("@import url('https://fonts.googleapis.com/css2?family=Sora:wght@100;400;600;700&display=block');\n\n.xar-light-mode {\n  --fg: #333333;\n  --bg: #eff1f3;\n  --background: #fcfcfc;\n  --inputShadow: 0 0 8px 3px rgba(126, 126, 126, 0.25);\n}\n\n.xar-dark-mode {\n  --fg: #ffffff;\n  --bg: #313131;\n  --background: #1f1f1f;\n  --inputShadow: 0 0 8px 3px rgba(0, 0, 0, 0.05);\n}\n\n.compact {\n  --modal-height: 235px;\n  --loader-font-size: 14px;\n  --loader-font-weight: 400;\n  --success-img-width: 70px;\n  --action-link-size: 12px;\n}\n\n.full {\n  --modal-height: 480px;\n  --loader-font-size: 20px;\n  --loader-font-weight: 700;\n  --success-img-width: 100px;\n  --action-link-size: 15px;\n}\n\n#xar-modal {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  z-index: 2147483648;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background: rgba(10, 10, 10, 0.7);\n  backdrop-filter: blur(16px);\n  font-family: Sora, sans-serif;\n}\n\n.xar-header-logo__container {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid var(--fg);\n}\n\n.xar-header-logo__empty-container {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.xar-header-logo {\n  max-width: 60px;\n  max-height: 60px;\n  margin: 0 auto;\n  display: inline-block;\n}\n\n.xar-header-heading {\n  font-family: 'Sora', sans-serif;\n  text-align: center;\n}\n\n.xar-header-subtext {\n  font-family: 'Sora', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  max-width: 200px;\n}\n\n.xar-email-login {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.xar-email-login > *:not(:first-child) {\n  margin-top: 20px;\n}\n\n.xar-email-login__label {\n  text-align: left;\n  font-size: 14px;\n  color: var(--fg);\n  font-weight: 400;\n}\n\n.xar-success__img {\n  max-width: var(--success-img-width);\n}\n\n.xar-email-login__input {\n  height: 45px;\n  padding: 0 16px;\n  font-size: 14px;\n  font-weight: 400;\n  color: var(--fg);\n  background: var(--bg);\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  box-shadow: var(--inputShadow);\n}\n\n.xar-social-container {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n\n.xar-social-icon__wrapper {\n  display: flex;\n  background: var(--fg);\n  width: 42px;\n  height: 42px;\n  border-radius: 50%;\n  align-items: center;\n}\n\n.xar-social-icon__wrapper:hover {\n  cursor: pointer;\n  transition: all 0.5s;\n  transform: scale(1.15, 1.15);\n}\n\n.xar-social-icon {\n  margin: 0 auto;\n  width: 24px;\n  max-height: 24px;\n}\n\n.xar-container {\n  padding: 30px 30px 20px;\n  width: 325px;\n  min-height: var(--modal-height);\n  background-color: var(--background);\n  color: var(--fg);\n  margin: 0 auto;\n  font-family: 'Sora', sans-serif;\n  box-shadow: 4px 5px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 10px;\n  box-sizing: content-box;\n}\n\n.xar-inner-container {\n  min-height: inherit;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.xar-inner-container > *:not(:first-child) {\n  margin-top: 20px;\n}\n\n.xar-btn {\n  width: 100%;\n  height: 2.75rem;\n  font-size: 14px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: var(--bg);\n  background: var(--fg);\n  border: none;\n  border-radius: 5px;\n}\n\n.xar-btn:disabled {\n  opacity: 0.7;\n}\n\n.xar-btn:hover:enabled {\n  cursor: pointer;\n  transition: all 0.5s;\n  transform: scale(1.05, 1.15);\n}\n\n.xar-btn:disabled,\n.xar-btn[disabled] {\n  cursor: not-allowed;\n}\n\n.xar-footer {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 1rem;\n}\n\n.xar-footer-text {\n  font-size: 12px;\n  font-weight: 400;\n}\n\n.xar-footer-img__link {\n  height: 15px;\n}\n\n.xar-footer-img {\n  display: block;\n}\n\n.xar-separator {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  text-align: center;\n}\n\n.xar-separator:before,\n.xar-separator:after {\n  content: '';\n  flex: 1 1 auto;\n  border-bottom: 1px solid var(--fg);\n}\n\n.xar-separator:before {\n  margin-right: 1rem;\n}\n\n.xar-separator:after {\n  margin-left: 1rem;\n}\n\n.xar-action__link {\n  text-underline-offset: 3px;\n  text-transform: uppercase;\n  text-decoration: underline;\n  color: #3e9aff;\n  font-weight: 700;\n  font-size: var(--action-link-size);\n  line-height: 19px;\n  cursor: pointer;\n}\n\n.xar-loader__text {\n  font-size: var(--loader-font-size);\n  font-weight: var(--loader-font-weight);\n}\n\n.xar-loader-circle {\n  stroke: var(--fg);\n}\n");const bn=({compact:e,logo:t})=>{const[n,r]=dn(!1);return Gt(Lt,{children:[n?"":Gt("div",{className:"xar-header-logo__empty-container"}),Gt("div",Object.assign({className:"xar-header-logo__container",style:n?{}:{display:"none"}},{children:Gt("img",{className:"xar-header-logo",src:t,alt:"app-logo",onLoad:()=>{r(!1)}})})),e?"":Gt("div",Object.assign({className:"xar-header-text"},{children:[Gt("h1",Object.assign({className:"xar-header-heading"},{children:"Welcome"})),Gt("p",Object.assign({className:"xar-header-subtext"},{children:"We’ll email you a login link for a password-free sign in."}))]}))]})},xn=({loginWithLink:e,email:n,setEmail:r})=>{const[i,o]=dn(!0);return function(e,t){var n=cn(Zt++,3);!gt.__s&&function(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}(n.__H,t)&&(n.__=e,n.i=t,Yt.__H.__h.push(n))}((()=>{o(!dt(n))}),[]),Gt("form",Object.assign({className:"xar-email-login"},{children:[Gt("input",{value:n,onInput:e=>{r(e.currentTarget.value),o(!dt(e.currentTarget.value))},className:"xar-email-login__input",type:"text",placeholder:"Enter your email"}),Gt("button",Object.assign({disabled:i,onClick:r=>t(void 0,void 0,void 0,(function*(){r.preventDefault(),n&&(yield e(n))})),className:"xar-btn"},{children:"Get Login Link"}))]}))},Cn=({text:e})=>Gt("div",Object.assign({className:"xar-separator"},{children:e})),En=({loginWithSocial:e,loginList:t,mode:n})=>Gt("div",Object.assign({className:"xar-social-container"},{children:t.map((t=>{return Gt("div",Object.assign({className:"xar-social-icon__wrapper",onClick:()=>(t=>e(t))(t)},{children:Gt("img",{src:(r=t,i=n,Bt[`${r}_${i}`]?Bt[`${r}_${i}`]:Bt[r]),alt:`${t} logo`,className:"xar-social-icon"})}));var r,i}))})),Ln=({mode:e})=>{const t=Kt[e];return Gt("div",Object.assign({className:"xar-footer"},{children:Gt("a",Object.assign({href:"https://arcana.network",target:"_blank",className:"xar-footer-img__link"},{children:Gt("img",{className:"xar-footer-img",src:t,alt:"Secured By Arcana"})}))}))},kn=e=>Gt(Lt,{children:[e.header?e.header:Gt(vn,{compact:e.compact,stroke:8,secondaryColor:"#8D8D8D"}),e.text?Gt("p",Object.assign({className:"xar-loader__text"},{children:e.text})):"",e.children?Gt(Lt,{children:e.children}):""]}),Sn=({children:e,mode:t})=>Gt("div",Object.assign({class:"xar-container"},{children:[Gt("div",Object.assign({class:"xar-inner-container"},{children:e})),Gt(Ln,{mode:t})]})),Nn=({text:e,method:t})=>Gt("div",Object.assign({class:"xar-action-container"},{children:Gt("p",Object.assign({onClick:()=>t(),className:"xar-action__link"},{children:e}))})),In="xar-modal",On=e=>Gt("div",Object.assign({id:In,onClick:t=>{var n;(null===(n=t.target)||void 0===n?void 0:n.id)==In&&e.closeFunc&&e.closeFunc(new Error("User closed the connect modal"))}},{children:e.children})),Rn={SOCIAL:"Please complete the login to proceed",LINK:"Sending login link to your email",LINK_SENT:"Please complete the login by clicking on email"},An={text:"",loading:!1,type:""},Pn=(e,t)=>"SOCIAL"==t||"LINK"==t||"LINK_SENT"==t?{text:Rn[t],type:t,loading:!0}:"RESET"==t?An:e,jn=e=>{const[n,r]=un(Pn,An),[i,o]=dn(""),s=()=>t(void 0,void 0,void 0,(function*(){i&&(r("LINK"),e.loginWithLink(i,(()=>{r("LINK_SENT")})).finally((()=>{r("RESET")})))}));return n.loading?Gt(On,{children:Gt(Sn,Object.assign({mode:e.mode},{children:Gt(kn,Object.assign({compact:e.options.compact,text:n.text,mode:e.mode,header:"LINK_SENT"==n.type?Gt("img",{className:"xar-success__img",src:ae}):void 0},{children:"LINK_SENT"==n.type?Gt(Lt,{children:[Gt(Nn,{method:()=>s(),text:"Resend email"}),Gt(Nn,{method:()=>r("RESET"),text:"Change email id"})]}):null}))}))}):Gt(On,Object.assign({closeFunc:e.closeFunc},{children:Gt(Sn,Object.assign({mode:e.mode},{children:[Gt(bn,{compact:e.options.compact,logo:e.logo}),Gt(xn,{email:i,setEmail:o,loginWithLink:s}),e.loginList.length>0?Gt(Lt,{children:[Gt(Cn,{text:"or continue with"}),Gt(En,{loginWithSocial:n=>t(void 0,void 0,void 0,(function*(){r("SOCIAL"),e.loginWithSocial(n).finally((()=>{r("RESET")}))})),loginList:e.loginList,mode:e.mode})]}):null]}))}))};class Fn{constructor(e){this.status="closed",this.close=e=>{"closed"!==this.status&&(this.onClose(e),this.status="closed",Ht(null,this.container))},this.params={loginList:e.loginList.filter((e=>"passwordless"!==e)),loginWithSocial:e.loginWithSocial,loginWithLink:e.loginWithLink,mode:e.mode,closeFunc:this.close,logo:e.logo,options:e.options},this.createContainer()}open(e){"open"!==this.status&&(this.onClose=e,this.status="open",Ht(Gt(jn,Object.assign({},this.params)),this.container))}createContainer(){const e=this.params.options.compact?"compact":"full";this.container=document.createElement("div"),this.container.setAttribute("id","xar-login-container"),this.container.classList.add(`xar-${this.params.mode}-mode`),this.container.classList.add(e),document.body.appendChild(this.container)}}e.AuthProvider=class{constructor(e,n){this.initStatus=we.CREATED,this.initPromises=[],this.loginWithSocial=e=>t(this,void 0,void 0,(function*(){if(this.initStatus===we.DONE){if(yield this.isLoggedIn())return this._provider;if(!(yield this._provider.isLoginAvailable(e)))throw new Error(`${e} login is not available`);const t=yield this._provider.initSocialLogin(e);return this.beginLogin(t)}throw X})),this.loginWithLink=(e,n)=>t(this,void 0,void 0,(function*(){if(this.initStatus===we.DONE){if(yield this.isLoggedIn())return this._provider;if(!dt(e))throw new Error("Invalid email");return yield this._provider.initPasswordlessLogin(e),n&&n(),yield this.waitForConnect()}throw X})),this.loginWithBearer=(e,n)=>t(this,void 0,void 0,(function*(){if(this.initStatus!==we.DONE)throw X;return yield this.iframeWrapper.triggerBearerAuthentication(e,n)}));let r=null==n?void 0:n.network,i=e;if((e=>3==e.split("_").length)(e)){const t=(e=>{const t=e.split("_"),[,n,r]=t;if(!le(r))throw new Error("Invalid ClientId");if("live"==n)return{network:"mainnet",address:r};if("test"==n)return{network:"testnet",address:r};if("dev"==n)return{network:"dev",address:r};throw new Error("Invalid ClientId")})(e);r=t.network,i=t.address}(e=>{if(!(e=>null!=e)(e))throw new Error("appAddress is required");if(!(e=>"string"==typeof e&&e.trim().length>0)(e))throw new Error("appAddress is required to be a non-empty string");if(!le(e))throw new Error("appAddress is required to be an ethereum address")})(i),this.appId=de(i),this.params=(e=>{var t;const n={network:"testnet",debug:!1,position:"right",theme:"dark",alwaysVisible:!0,setWindowProvider:!1,connectOptions:{compact:!1}};return(null==e?void 0:e.network)&&(n.network=e.network),void 0!==(null==e?void 0:e.debug)&&(n.debug=e.debug),(null==e?void 0:e.redirectUrl)&&(n.redirectUrl=e.redirectUrl),(null==e?void 0:e.chainConfig)&&(n.chainConfig=e.chainConfig),(null==e?void 0:e.theme)&&(n.theme=e.theme),(null==e?void 0:e.position)&&(n.position=e.position),void 0!==(null==e?void 0:e.alwaysVisible)&&(n.alwaysVisible=e.alwaysVisible),void 0!==(null===(t=null==e?void 0:e.connectOptions)||void 0===t?void 0:t.compact)&&(n.connectOptions.compact=e.connectOptions.compact),"testnet"!=n.network&&"dev"!=n.network||console.log(`%c[Arcana Auth] You are currently on ${n.network} network.`,"color: red"),n})(Object.assign(Object.assign({},n),{network:r})),this.networkConfig=(e=>{if("string"==typeof e&&"testnet"==e)return qe;if("string"==typeof e&&"dev"==e)return ze;if("string"==typeof e&&"mainnet"==e)return He;if(function(e){return"string"!=typeof e&&(!("object"!=typeof e||!e.gatewayUrl)&&(!("object"!=typeof e||!e.walletUrl)&&!("object"!=typeof e||!e.authUrl)))}(e))return e;throw new Error("Invalid network config passed")})(this.params.network),function(e,t){try{if("undefined"==typeof document)return;const n=document.createElement("link");n.href=`${e}/${t}/login`,n.type="text/html",n.rel="prefetch",document.head.appendChild(n)}catch(e){console.warn(e)}}(this.networkConfig.walletUrl,this.appId),this.rpcConfig=this.params.chainConfig,this._provider=new ve(this.rpcConfig),this.params.debug?(ie(ee.DEBUG),re=e=>{console.error(e)}):ie(ee.NOLOGS)}init(){var e;return t(this,void 0,void 0,(function*(){return this.initStatus===we.CREATED?(this.initStatus=we.RUNNING,this.iframeWrapper||(yield this.setAppConfig(),this.iframeWrapper=new Te({appId:this.appId,iframeUrl:this.networkConfig.walletUrl,appConfig:this.appConfig,position:this.params.position,standaloneMode:this._standaloneMode}),this.iframeWrapper.setWalletType(null!==(e=this.params.appMode)&&void 0!==e?e:this.params.alwaysVisible?be.Full:be.Widget),yield this._provider.init(this.iframeWrapper,{loginWithLink:this.loginWithLink,loginWithSocial:this.loginWithSocial}),this.setProviders(),this.initStatus=we.DONE,this.resolveInitPromises()),this):this.initStatus===we.RUNNING?yield this.waitForInit():this}))}connect(){return t(this,void 0,void 0,(function*(){if(this.initStatus!==we.DONE&&(yield this.init()),yield this.isLoggedIn())return this._provider;const e=yield this.getLogins();return this.connectCtrl||(this.connectCtrl=new Fn({loginWithLink:this.loginWithLink,loginWithSocial:this.loginWithSocial,loginList:e,mode:this.theme,logo:this.logo.vertical,options:this.params.connectOptions})),new Promise(((e,t)=>{this.connectCtrl.open((e=>{if(e)return t(e)})),this.waitForConnect().then((t=>{this.connectCtrl.close(),e(t)})).catch(t)}))}))}showWallet(){if(!this.connected)throw new Error("no connection yet, cannot show wallet");this._provider.expandWallet()}get connected(){return this._provider.connected}getUser(){if(this.initStatus===we.DONE)return this._provider.requestUserInfo();throw X}isLoggedIn(){return t(this,void 0,void 0,(function*(){if(this.initStatus===we.DONE){return this._provider.isLoggedIn()}throw X}))}logout(){if(this.initStatus===we.DONE)return this._provider.triggerLogout();throw X}getPublicKey(e,n="google"){return t(this,void 0,void 0,(function*(){if(this.initStatus===we.DONE){if(!e||""===e)throw new Z("email_required",`Email is required in getPublicKey, got ${e}`);return yield this._provider.getPublicKey(e,n)}throw X}))}getLogins(){return t(this,void 0,void 0,(function*(){if(this.initStatus===we.DONE)return yield this._provider.getAvailableLogins();throw X}))}getProvider(){if(this.initStatus===we.DONE)return this._provider;throw X}canReconnect(){return t(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return!1;const e=this.iframeWrapper.getSessionID();return!!e&&!(e.expiry<Date.now())}))}reconnect(){return t(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return void(yield this.waitForConnect());const e=this.iframeWrapper.getSessionID();if(e){if(e.expiry<Date.now())throw new Error("cannot reconnect, session expired");const t=new URL(yield this._provider.getReconnectionUrl());t.searchParams.set("sessionID",e.id);const n=new ut(t.toString());return yield n.open(),void(yield this.waitForConnect())}throw new Error("cannot reconnect, no session found")}))}get chainId(){return this._provider.chainId}beginLogin(e){return t(this,void 0,void 0,(function*(){const t=new ut(e);return yield t.open(),yield this.waitForConnect()}))}waitForConnect(){return new Promise((e=>{if(this.connected)return e(this._provider);this._provider.once("connect",(()=>e(this._provider)))}))}setAppConfig(){return t(this,void 0,void 0,(function*(){const e=yield function(e,n){return t(this,void 0,void 0,(function*(){const t=new URL(`/api/v1/get-app-theme/?id=${e}`,n);return yield(yield fetch(t.toString())).json()}))}(this.appId,this.networkConfig.gatewayUrl),n=function(e,t,n){const r=new URL(`/api/v2/app/${e}/logo?type=${t}`,n);return{horizontal:`${r.toString()}&orientation=horizontal`,vertical:`${r.toString()}&orientation=vertical`}}(this.appId,this.params.theme,this.networkConfig.gatewayUrl),r=e.logo.dark_horizontal||e.logo.light_horizontal,i=e.logo.dark_vertical||e.logo.light_vertical;this.appConfig={name:e.name,themeConfig:{assets:{logo:{horizontal:r?n.horizontal:"",vertical:i?n.vertical:""}},theme:this.params.theme}}}))}waitForInit(){return t(this,void 0,void 0,(function*(){const e=new Promise((e=>{this.initPromises.push(e)}));return yield e}))}resolveInitPromises(){const e=this.initPromises;this.initPromises=[];for(const t of e)t(this)}get provider(){if(this._provider)return this._provider;throw X}get logo(){if(this.initStatus===we.DONE)return this.appConfig.themeConfig.assets.logo;throw X}get theme(){if(this.initStatus===we.DONE)return this.appConfig.themeConfig.theme;throw X}setProviders(){var e,t,n;const r=window;try{r.arcana=null!==(e=r.arcana)&&void 0!==e?e:{},r.arcana.provider=this._provider}catch(e){}if(this.params.setWindowProvider)try{r.ethereum=null!==(t=r.ethereum)&&void 0!==t?t:this._provider,r.ethereum.providers=null!==(n=r.ethereum.providers)&&void 0!==n?n:[],r.ethereum.providers.push(this._provider)}catch(e){console.error(e)}}standaloneMode(e,t){this._standaloneMode={mode:e,handler:t}}},Object.defineProperty(e,"__esModule",{value:!0})}));